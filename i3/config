######################################################################
#                            oh-my-i3
# Date    : 12/12/2015
# Author  : Allen_Qiu
# Version : v1.1
# ä¾èµ–:conky feh (å¯é€‰æ¨è:xcompmgr freetype-infinality)
# éƒ¨åˆ†ç‰¹æ€§å¯èƒ½éœ€è¦æ–°ç‰ˆæœ¬æ”¯æŒï¼Œè¯·æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬æˆ–è‡ªè¡Œä¿®æ”¹ç›¸åº”éƒ¨åˆ†
# æ›´å¤šå†…å®¹è¯·å‚è€ƒ:
# i3 Userâ€™s Guide: http://i3wm.org/docs/userguide.html
# oh-my-i3 github: https://github.com/ID1258/oh-my-i3.git
#
######################################################################

# => å¼€æœºè‡ªå¯ï¼ˆæ ¹æ®éœ€è¦å–æ¶ˆç›¸åº”çš„æ³¨é‡Š#ï¼‰
# å£çº¸é¡»å…ˆå®‰è£…fehï¼Œå¹¶åœ¨æ­¤æŒ‡å®šè·¯å¾„
#exec_always ~/Scripts/hMonitor.sh
# è®¾ç½®é€æ˜é¡»å…ˆå®‰è£…xcompmgrï¼Œå¹¶åœ¨æ­¤æŒ‡å®šè½¯ä»¶å’Œé€æ˜åº¦ï¼ˆé»˜è®¤0.75ï¼‰ï¼Œsleepä¿è¯transsetåœ¨å…¶æ‰€è®¾ç½®çš„è½¯ä»¶ä¹‹åå¯åŠ¨ï¼Œæ ¹æ®æƒ…å†µè°ƒèŠ‚å¤§å°
#exec --no-startup-id sleep 1;and bash transset-df -n i3bar 0.65
# å»ºè®®å¦å¤–æŒ‡å®šä¸€ä¸ªè„šæœ¬æ¥å¯åŠ¨é€šç”¨çš„å¼€æœºè‡ªå¯é¡¹ç›®
exec --no-startup-id /home/vimsucks/Scripts/flexmo.sh
exec --no-startup-id /home/vimsucks/Scripts/i3-startup.sh
#exec_always --no-startup-id $HOME/.config/polybar/launch.sh

# => è®¾å®šmodé”®ä¸å·¥ä½œåŒºå
set $mod  Mod4
set $WS1  1:ğŸ–‹ï¸
set $WS2  2:ğŸŒ
set $WS3  3:ğŸ“ƒ
set $WS4  4:ğŸ“‚
set $WS5  5:ğŸ“§
set $WS6  6:ğŸ“š
set $WS7  7:ğŸ’¬ 
set $WS8  8:ğŸ“º
set $WS9  9:ğŸ®
set $WS0 10:âš™ï¸

# => å·¥ä½œåŒºåˆ‡æ¢&æ™ºèƒ½å¯åŠ¨ï¼ˆæ·»åŠ æ™ºèƒ½å¯åŠ¨è„šæœ¬~/bin/st è‡ªåŠ¨ä¸”ä¸é‡å¤æ‰“å¼€å·¥ä½œåŒºç›¸åº”ç¨‹åºï¼‰
# è‡ªåŠ¨åˆ‡æ¢åˆ°æ–°æ‰“å¼€çš„çª—å£(éœ€4.12ç‰ˆæœ¬æ”¯æŒ)
#focus_on_window_activation focus
# é‡å¤åˆ‡æ¢åˆ°å½“å‰å·¥ä½œåŒºæ—¶ä¼šè¿”å›ä¸Šä¸€ä¸ªæ‰€åœ¨å·¥ä½œåŒºï¼Œæœ‰å¯èƒ½é€ æˆå·¥ä½œåŒºé”™ä½
#workspace_auto_back_and_forth yes
# æ³¨é‡Šéƒ¨åˆ†è¯·ä¾æ®ä¸ªäººå–œå¥½æ›´æ”¹å¹¶å–æ¶ˆæ³¨é‡Šï¼Œä¸”æŠŠi3-sensible-terminalæ›¿æ¢ä¸ºå¸¸ç”¨term
bindsym $mod+1 workspace $WS1
bindsym $mod+2 workspace $WS2
bindsym $mod+3 workspace $WS3
bindsym $mod+4 workspace $WS4
bindsym $mod+5 workspace $WS5
bindsym $mod+6 workspace $WS6
bindsym $mod+7 workspace $WS7
bindsym $mod+8 workspace $WS8
bindsym $mod+9 workspace $WS9
bindsym $mod+0 workspace $WS0
bindsym $mod+Tab workspace back_and_forth
#workspace_auto_back_and_forth yes
focus_on_window_activation none

# Layout Settings

# => å¿«æ·å¯åŠ¨
bindsym $mod+Return exec --no-startup-id termite
bindsym $mod+Control+Return exec --no-startup-id termite -e "tmux attach"
bindsym --release $mod+d exec "rofi -show combi -combi-mode window,drun -pid /tmp/rofi.pid"
bindsym $mod+Shift+d exec rofi -show run
bindsym $mod+e      exec --no-startup-id thunar
bindsym $mod+r      exec --no-startup-id emacsclient -nc

# => è‡ªå®šä¹‰çª—å£ï¼ˆæ”¯æŒå®šä¹‰è¾¹æ¡†ç±»å‹ï¼Œçª—å£å¸ƒå±€ï¼Œå¤§å°è°ƒæ•´ï¼Œè‡ªåŠ¨å½’ç±»å·¥ä½œåŒºç­‰ç­‰ï¼Œå¤šä¸ªå®šä¹‰ç”¨,éš”å¼€ï¼‰
for_window [ workspace="7" ] floating enable, border normal
for_window [class="copyq"] floating enable, border normal
#for_window [class="jetbrains-studio"] move container to workspace $WS3
#for_window [class="jetbrains-pycharm"] move container to workspace $WS3
#for_window [class="jetbrains-idea"] move container to workspace $WS3
for_window [class="Google-chrome"] move container to workspace $WS2
for_window [class="Thunderbird"] move container to workspace $WS5
for_window [class="Pidgin"] floating enable, border normal
for_window [class="QQ.exe"] move container to workspace $WS7, floating enable
for_window [title="Google Keep"] floating enable, border normal
#for_window [class="VirtualBox"] move container to workspace $WS6
#for_window [class="VirtualBox" title="Oracle VM VirtualBox Manager"] move container to workspace $WS1, fullscreen disable, floating enable, border normal, resize set 640 480
for_window [class="VirtualBox" title="Oracle VM VirtualBox Manager"] fullscreen disable, floating enable, border normal, resize set 640 480
for_window [class="electronic-wechat"] move container to workspace $WS7
for_window [class="TelegramDesktop"] move container to workspace $WS7, floating enable, border normal
for_window [class="Pidgin"] move container to workspace $WS7, floating enable, border normal
for_window [class="netease-cloud-music"] move container to workspace $WS8, floating enable
for_window [title="Android Emulator - *"] floating enable, border normal
for_window [class="Steam"] move container to workspace $WS9, floating enable, border normal
#for_window [class="jetbrains-idea"] move container to workspace $WS3
for_window [class="jetbrains-*"] move container to workspace $WS3
for_window [class="Transmission-gtk" ] move container to workspace $WS4

# => çª—å£è¾¹æ¡†ç±»å‹ï¼ˆè¾¹æ¡†ç±»å‹æœ‰normalæ­£å¸¸/noneæ— è¾¹æ¡†/pixel 1 è‡ªå®šä¹‰å®½åº¦ï¼‰
# é»˜è®¤æ™®é€šçª—å£çš„è¾¹æ¡†ç±»å‹
new_window pixel 4
# é»˜è®¤æµ®åŠ¨çª—å£çš„è¾¹æ¡†ç±»å‹
new_float normal
# å–æ¶ˆå·¥ä½œåŒºè¾¹ç¼˜çš„è¾¹æ¡†
hide_edge_borders both
# åœ¨ä¸‰ç§è¾¹æ¡†ç±»å‹ä¸­åˆ‡æ¢
bindsym $mod+b border toggle

# => æ–°å»ºçª—å£çš„åˆ†å‰²æ–¹å‘
bindsym $mod+u split h
bindsym $mod+o split v

# => ç§»åŠ¨çª—å£
bindsym $mod+Control+h  move left
bindsym $mod+Control+j  move down
bindsym $mod+Control+k    move up
bindsym $mod+Control+l move right
bindsym $mod+Control+Shift+h  move workspace to output left
bindsym $mod+Control+Shift+j  move workspace to output down
bindsym $mod+Control+Shift+k  move workspace to output up
bindsym $mod+Control+Shift+l  move workspace to output right

# Switch Workspace
bindsym $mod+Mod1+h  workspace prev
bindsym $mod+Mod1+j  workspace prev
bindsym $mod+Mod1+k  workspace next
bindsym $mod+Mod1+l  workspace next

# => è°ƒæ•´çª—å£å¤§å°
# These bindings trigger as soon as you enter the resize mode

# Pressing left will shrink the windowâ€™s width.
# Pressing right will grow the windowâ€™s width.
# Pressing up will shrink the windowâ€™s height.
# Pressing down will grow the windowâ€™s height.
#bindsym $mod+Shift+h resize grow left 5 px or 5 ppt
#bindsym $mod+Shift+k resize grow up 5 px or 5 ppt
#bindsym $mod+Shift+j resize grow down 5 px or 5 ppt
#bindsym $mod+Shift+l resize grow right 5 px or 5 ppt
bindsym $mod+Shift+h resize shrink width 5 px or 5 ppt
bindsym $mod+Shift+k resize grow height 5 px or 5 ppt
bindsym $mod+Shift+j resize shrink height 5 px or 5 ppt
bindsym $mod+Shift+l resize grow width 5 px or 5 ppt

# => å…³é—­çª—å£
bindsym $mod+w kill

# => ç„¦ç‚¹åˆ‡æ¢
# ç„¦ç‚¹è·Ÿéšé¼ æ ‡ç§»åŠ¨
focus_follows_mouse no
# ç„¦ç‚¹åˆ‡æ¢åˆ°çˆ¶çª—å£
bindsym $mod+q focus parent
# ç„¦ç‚¹åˆ‡æ¢å›å­çª—å£
bindsym $mod+Shift+q focus child
# ç„¦ç‚¹åˆ‡æ¢åˆ°æµ®åŠ¨çª—å£
bindsym $mod+Shift+space focus mode_toggle
#
bindsym $mod+k focus up
bindsym $mod+j focus down
bindsym $mod+h focus left
bindsym $mod+l focus right

# => å¸ƒå±€åˆ‡æ¢
# åˆ‡æ¢åˆ°å †å å¸ƒå±€
# bindsym $mod+z layout stacking
# åˆ‡æ¢åˆ°æ ‡ç­¾å¸ƒå±€
# bindsym $mod+x layout tabbed
# åˆ‡æ¢åˆ°å¹³é“ºå¸ƒå±€ï¼ˆç«–ç›´/æ°´å¹³ï¼‰
# bindsym $mod+c layout toggle split
# åœ¨æ‰€æœ‰å¸ƒå±€ä¸­è½®å›åˆ‡æ¢
bindsym $mod+x layout toggle all
# çª—å£åˆ‡æ¢åˆ°å…¨å±
bindsym $mod+n fullscreen toggle
# çª—å£åˆ‡æ¢åˆ°æµ®åŠ¨
bindsym $mod+s floating toggle
# çª—å£åˆ‡æ¢ä¸ºç²˜æ»
bindsym $mod+g sticky toggle

# => ç§»åŠ¨çª—å£åˆ°å¦ä¸€ä¸ªå·¥ä½œåŒº
bindsym $mod+mod1+Left  move container to workspace prev, workspace prev
bindsym $mod+mod1+Right move container to workspace next, workspace next
bindsym $mod+Shift+1 move container to workspace $WS1
bindsym $mod+Shift+2 move container to workspace $WS2
bindsym $mod+Shift+3 move container to workspace $WS3
bindsym $mod+Shift+4 move container to workspace $WS4
bindsym $mod+Shift+5 move container to workspace $WS5
bindsym $mod+Shift+6 move container to workspace $WS6
bindsym $mod+Shift+7 move container to workspace $WS7
bindsym $mod+Shift+8 move container to workspace $WS8
bindsym $mod+Shift+9 move container to workspace $WS9
bindsym $mod+Shift+0 move container to workspace $WS0

# => æš‚å­˜çª—å£ï¼ˆé¢å¤–çš„å¯éšè—æµ®åŠ¨çª—å£ï¼Œå–æ¶ˆæµ®åŠ¨è¿˜åŸæˆæ™®é€šçª—å£ï¼‰
# è½¬æ¢æ™®é€šçª—å£ä¸ºæš‚å­˜çª—å£
bindsym $mod+Shift+f move scratchpad
# å‘¼å‡º/éšè—æš‚å­˜çª—å£
#bindsym $mod+f scratchpad show, resize set 1366 800, move position 277 140
bindsym $mod+f scratchpad show

# => é‡æ–°è½½å…¥ï¼ˆæ›´æ”¹é…ç½®æ–‡ä»¶ååªé¡»é‡è½½å³å¯ç”Ÿæ•ˆï¼Œä¸åŒ…å«è‡ªå¯éƒ¨åˆ†ï¼‰
#bindsym $Mod+Shift+r exec auto-randr.sh && restart
#bindsym $mod+Shift+r exec auto-randr.sh && reload
bindsym $mod+Control+r reload
bindsym $mod+Shift+r exec flexmo.sh && echo 233 >> /tmp/fuck.log

# => ç”µæºç®¡ç†ï¼ˆPause Breaké”®å‘¼å‡º)
set $mode_system ç³»ç»Ÿ:è‡ªåŠ¨é”å±(A) é”å±(L) æ³¨é”€(O) ä¼‘çœ (S) å…³æœº(H) é‡å¯(R) å–æ¶ˆ(Esc)
bindsym $mod+p mode "$mode_system"
mode "$mode_system" {
    bindsym a exec /home/vimsucks/Scripts/toggle-xautolock.sh && pkill -RTMIN+9 i3blocks, mode "default"
    bindsym l exec --no-startup-id  /home/vimsucks/Scripts/lock.sh, mode "default"
    bindsym o exec i3-preexit.sh, exec i3-msg exit
    bindsym s exec systemctl hibernate , mode "default"
    bindsym h mode "$confirm_poweroff"
    bindsym r mode "$confirm_reboot"
    bindsym Escape mode "default"
}

set $confirm_poweroff ç¡®å®šå…³æœºï¼Ÿ(y/n)
mode "$confirm_poweroff" {
	bindsym y exec systemctl poweroff
	bindsym n mode "default"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

set $confirm_reboot ç¡®å®šé‡å¯ï¼Ÿ(y/n)
mode "$confirm_reboot" {
	bindsym y exec systemctl reboot
	bindsym n mode "default"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}


bindsym XF86PowerOff exec --no-startup-id nofity-send "Power Button Pressed"

# Volume control
#bindsym $mod+XF86AudioRaiseVolume exec --no-startup-id xbacklight +10 && pkill -RTMIN+8 i3blocks    #Raise backlight.
#bindsym $mod+XF86AudioLowerVolume exec --no-startup-id xbacklight -10 && pkill -RTMIN+8 i3blocks    #Lower backlight.
bindsym Scroll_Lock exec --no-startup-id xbacklight -10 && pkill -RTMIN+8 i3blocks    #Raise backlight.
bindsym Pause exec --no-startup-id xbacklight +10 && pkill -RTMIN+8 i3blocks    #Lower backlight.
bindsym XF86AudioRaiseVolume exec --no-startup-id amixer -q sset Master 5%+ && pkill -RTMIN+7 i3blocks    #Raise sound Vol.
bindsym XF86AudioLowerVolume exec --no-startup-id amixer -q sset Master 5%- && pkill -RTMIN+7 i3blocks    #Decrease sound Vol.
bindsym XF86AudioMute exec --no-startup-id amixer -q -D pulse set Master 1+ toggle && pkill -RTMIN+7 i3blocks   #Toggle mute
# Sreen brightness controls
bindsym XF86MonBrightnessUp exec xbacklight -inc 10 # increase screen brightness
bindsym XF86MonBrightnessDown exec xbacklight -dec 10 # decrease screen brightness
bindsym XF86AudioPlay exec playerctl play
bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
# Screenshots
bindsym --release $mod+Shift+z exec maim ~/Pictures/Screenshots/$(date +%F-%T).png
bindsym --release $mod+z exec maim -s ~/Pictures/Screenshots/$(date +%F-%T).png
# IM Control
#bindsym $mod+space exec ~/Scripts/toggle-im.sh
#
bindsym Print exec auto-randr.sh && restart


############################# ä¸»é¢˜ç›¸å…³ ###############################

# å­—ä½“
font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
#font pango:WenQuanYi Micro Hei 11
#font pango:Fira Code Retina, FontAwesome 11
#font pango:WenQuanYi Micro Hei, FontAwesome 11
#font pango:Hack, FontAwesome 11
#font pango:Inziu Iosevka Slab SC, FontAwesome 11
font pango:Inziu Iosevka Slab SC, FontAwesome 11

# çª—å£é¢œè‰²                è¾¹æ¡†    èƒŒæ™¯    æ–‡å­—    æç¤º
client.focused          #333333 #268bd2 #FFFFFF #333333
client.focused_inactive #999999 #999999 #FFFFFF #3399FF
client.unfocused        #999999 #999999 #FFFFFF #3399FF
client.urgent           #990000 #990000 #FFFFFF #990000
client.placeholder      #000000 #000000 #FFFFFF #000000
client.background       #FFFFFF

# i3bar
#bindsym $mod+m bar mode toggle
#set $transparent #222222A0
set $transparent #00000080
bar {
    mode invisible
}
bar {
    # i3barè°ƒç”¨
        #
    i3bar_command i3bar -t
    #status_command conky -c /home/vimsucks/.config/i3/conkyrc
    #status_command i3blocks
    #status_command i3blocks -c /home/vimsucks/.config/i3/i3blocks.conf
    status_command SCRIPT_DIR=/home/vimsucks/.config/i3/i3blocks-scripts i3blocks -c /home/vimsucks/.config/i3/i3blocks.conf

    height 22
    output eDP1
    output HDMI1
    tray_output primary
    #tray_output HDMI1
    #tray_output eDP1
    tray_padding 1
    # æ˜¾ç¤ºä½ç½®
    position bottom
    # æ˜¯å¦éšè—
    # mode invisible
    # æ˜¾ç¤º/éšè—åˆ‡æ¢é”®
    #modifier 
    # æ‹†è§£å·¥ä½œåŒºåï¼ˆéšè—å‰é¢çš„1:2:3:â€¦â€¦ï¼‰
    strip_workspace_numbers no
    # å®šä¹‰åˆ†éš”ç¬¦ï¼ˆé€‚ç”¨äºi3statusï¼‰
    #separator_symbol  
        colors {
            #background #37474F
            background $transparent
            #background #000000A0
            statusline #FFFFFF
            separator  #3399FF
            # å·¥ä½œåŒºé¢œè‰²         è¾¹æ¡†    èƒŒæ™¯    æ–‡å­—
            #focused_workspace  #26A69A #26A69A #FFFFFF
            focused_workspace  $transparent $transparent #268bd2


            #active_workspace   #FFFFFF #37474F #FFFFFF
            active_workspace $transparent $transparent #FFFFFF
            #inactive_workspace #37474F #37474F #FFFFFF
            inactive_workspace $transparent $transparent #FFFFFF
            urgent_workspace   #990000 #990000 #FFFFFF
            #binding_mode       #26A69A #26A69A #FFFFFF
            binding_mode       #1DE9B6 $transparent #268bd2
        }
}
############################ i3-gaps #################################
gaps inner 6
gaps outer 4
smart_gaps on
smart_borders on
set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
bindsym $mod+Shift+g mode "$mode_gaps"

mode "$mode_gaps" {
    bindsym o      mode "$mode_gaps_outer"
    bindsym i      mode "$mode_gaps_inner"
    bindsym Return mode "default"
    bindsym Escape mode "default"

}

mode "$mode_gaps_inner" {
    bindsym plus  gaps inner current plus 5
    bindsym minus gaps inner current minus 5
    bindsym 0     gaps inner current set 0

    bindsym Shift+plus  gaps inner all plus 5
    bindsym Shift+minus gaps inner all minus 5
    bindsym Shift+0     gaps inner all set 0

    bindsym Return mode "default"
    bindsym Escape mode "default"

}
mode "$mode_gaps_outer" {
    bindsym plus  gaps outer current plus 5
    bindsym minus gaps outer current minus 5
    bindsym 0     gaps outer current set 0

    bindsym Shift+plus  gaps outer all plus 5
    bindsym Shift+minus gaps outer all minus 5
    bindsym Shift+0     gaps outer all set 0

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# fix graphics glitch
#for_window [class="^.*"] border pixel 0
#for_window [class="(?i)urxvt"] border pixel 3

set $mode_rofi ROFI: å‰ªè´´æ¿(C) æ•™åŠ¡ç®¡ç†ç³»ç»Ÿ(J) å¼€å…³å†…ç½®é”®ç›˜(K) æ˜¾ç¤ºå™¨(M) WIFI(N) è‡ªåŠ¨è°ƒæ•´æ˜¾ç¤º(R) æœç´¢ç½‘é¡µ(S)
bindsym $mod+semicolon mode "$mode_rofi"
mode "$mode_rofi" {
    bindsym --release c exec --no-startup-id clipmenu, mode "default"
    bindsym --release j exec --no-startup-id jwgl.py, mode "default"
    bindsym --release k exec --no-startup-id toggle-kbd.sh, mode "default"
    bindsym --release s exec --no-startup-id rofi-surfraw, mode "default"
    bindsym --release n exec --no-startup-id networkmanager_dmenu, mode "default"
    bindsym --release r exec --no-startup-id auto-randr.sh, mode "default"
    bindsym --release m exec --no-startup-id monitor_layout.sh, mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
